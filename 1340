#include <stdio.h>
#include <stdlib.h>

#define MAX 1000

int p[MAX], f[MAX], fp[MAX];
int t_p = 0, i_f = 0, f_f = 0, t_fp = 0;

void empilhar(int x) { p[t_p++] = x; }
int desempilhar() { return (t_p == 0) ? -1 : p[--t_p]; }

void enfileirar(int x) { f[f_f++] = x; }
int desenfileirar() { return (i_f == f_f) ? -1 : f[i_f++]; }

void por_fp(int x) {
    int i = t_fp - 1;
    while (i >= 0 && fp[i] < x) {
        fp[i + 1] = fp[i];
        i--;
    }
    fp[i + 1] = x;
    t_fp++;
}

int tirar_fp() {
    if (t_fp == 0) return -1;
    int maior = fp[0];
    for (int i = 0; i < t_fp - 1; i++) fp[i] = fp[i + 1];
    t_fp--;
    return maior;
}

int main() {
    int n;
    while (scanf("%d", &n) != EOF) {
        t_p = i_f = f_f = t_fp = 0;
        int eh_p = 1, eh_f = 1, eh_fp = 1;

        for (int i = 0; i < n; i++) {
            int op, x;
            scanf("%d %d", &op, &x);

            if (op == 1) {
                if (eh_p) empilhar(x);
                if (eh_f) enfileirar(x);
                if (eh_fp) por_fp(x);
            } else {
                if (eh_p && desempilhar() != x) eh_p = 0;
                if (eh_f && desenfileirar() != x) eh_f = 0;
                if (eh_fp && tirar_fp() != x) eh_fp = 0;
            }
        }

        int soma = eh_p + eh_f + eh_fp;
        if (soma == 0) printf("impossible\n");
        else if (soma > 1) printf("not sure\n");
        else {
            if (eh_p) printf("stack\n");
            else if (eh_f) printf("queue\n");
            else printf("priority queue\n");
        }
    }
    return 0;
}
