#include <stdio.h>
#include <string.h>

int adj[26][26];
int vis[26];
int V, E;

void dfs_collect(int u, int comp[], int *cnt) {
    vis[u]=1;
    comp[(*cnt)++]=u;
    for(int v=0; v<V; v++){
        if(adj[u][v] && !vis[v]) dfs_collect(v, comp, cnt);
    }
}

int main(){
    int T;
    if(scanf("%d",&T)!=1) return 0;
    for(int tc=1; tc<=T; tc++){
        scanf("%d %d",&V,&E);
        memset(adj,0,sizeof(adj));
        memset(vis,0,sizeof(vis));
        for(int i=0;i<E;i++){
            char a,b;
            scanf(" %c %c",&a,&b);
            int x=a-'a', y=b-'a';
            adj[x][y]=adj[y][x]=1;
        }
        printf("Case #%d:\n",tc);
        int comps=0;
        for(int i=0;i<V;i++){
            if(!vis[i]){
                int comp[26], cnt=0;
                dfs_collect(i, comp, &cnt);
                for(int a=0;a<cnt-1;a++){
                    for(int b=a+1;b<cnt;b++){
                        if(comp[a]>comp[b]){
                            int t=comp[a]; comp[a]=comp[b]; comp[b]=t;
                        }
                    }
                }
                for(int k=0;k<cnt;k++) printf("%c,", 'a'+comp[k]);
                printf("\n");
                comps++;
            }
        }
        printf("%d connected components\n\n", comps);
    }
    return 0;
}
